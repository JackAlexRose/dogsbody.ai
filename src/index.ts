import { fetchFromAdana } from "./lib/adana";
import { fetchFromGPT, transformGPTResponse } from "./lib/gpt";
import { getEnv, writeToFile } from "./lib/utils";

// const run = async () => {
//   const message = await fetchFromGPT(
//     `Turn the following markdown content into a single string with rich text formatting: A [debt consolidation loan](https://www.clearscore.com/loans/debt-consolidation) is a loan that allows you to move all your debt (such as personal loans, [credit cards](https://www.clearscore.com/credit-cards) and store cards) into one place. This means you will have one big loan to cover the amount of your current debt, rather than having several little ones. You will then, usually, only have to make one monthly repayment and in theory your debt might feel easier to manage.\n\n## The two types of debt consolidation loans\n\n### Secured\n\nA secured debt consolidation loan means the lender uses something you own – like your house – to secure your debt.  If you fail to repay the loan, the lender can sell this to help recoup the money they’re owed. [Secured loans](https://www.clearscore.com/loans/secured) usually have lower rates of interest than an unsecured loan because there’s less risk for the lender, but of course there’s a much bigger risk for yourself.\n\n### Unsecured\n\nAn unsecured loan is a loan you’re given that isn’t secured by anything you own. Instead the information on your credit report is used to help the lender establish if they want to give you the loan. If you fail to make the repayments on the loan this could damage your credit score.\n\n<ArticleCta>\n\n**Looking for a loan?** You can [compare loans](https://www.clearscore.com/loans) with a ClearScore account without hurting your credit score.\n\n</ArticleCta>\n\n## Things to think about when considering a debt consolidation loan\n\nBe aware that even though a debt consolidation loan puts all your debt in one place, it is not always the cheaper option. It will only save you money if you’re able to get a loan that beats the cost of what you’re currently paying.\n\nWe’ve put together a list of things you should think about when working out the cost of a debt consolidation loan:\n\n### 1. Interest rates\n\nDon’t make the mistake of thinking that a debt consolidation loan will cost you less in interest just because you’re being charged a single rate.  Try working out about how much you are currently set to pay for your debt and compare this to how much it will cost you if you get a debt consolidation loan.\n\n### 2. Fees - the price of moving your debt\n\nBefore you make any decisions on moving your debt you need to check what you’ve signed up for already. Sometimes you will incur charges for moving your debt from one lender to another. Always check the small print to see what applies to you. Here are a couple of common fees that may affect you:\n\n- **Switching fees** – you might be charged a fee by your current lender for moving the money you’ve already borrowed\n- **Debt consolidator fees** – some debt consolidation loans will require you pay a fee when you take out a new loan\n \n\n### 3. Think about your repayment plan\n\nBefore you commit to a loan, you will have to agree how much you pay back each month and how long you will have to repay the loan. If you choose to pay back smaller amounts of money over a longer period of time this may help you manage your debt but cost you more in the long run. If you’re currently paying off your debt over a shorter period, this may end up being a cheaper option. \n\n### 4. Make sure you can keep up payments for the term of the loan\n\nIf you’re going to take out a new loan, think about whether your circumstances might be about to change. If you think you won’t be able to make the repayments on this loan, then it might not be right for you. This is especially the case if you get a secured loan, as you might risk losing your home if you fail to keep up with repayments.\n\n### Debt consolidation loans aren't the only option\n\nAlthough a debt consolidation loan might feel like the easiest solution if you're wanting to simplifying your debt, don't discount other forms of borrowing that might be cheaper.\n\nIf you're looking to move around a relatively low amount of debt, you might want to consider a balance transfer credit card instead. And if your credit score and report are in [good shape](https://www.clearscore.com/learn/credit-score-and-report/how-to-improve-your-credit-score-in-10-easy-steps) you might be able to bag a 0% interest offer too.\n\n<ArticleCta>\n\n**Want to shift a small amount of debt?** Try a [balance transfer card](https://www.clearscore.com/credit-cards/balance-transfer). \n\n</ArticleCta>\n\nAnother form of borrowing you might want to think about is a [personal loan](https://www.clearscore.com/loans/personal). Depending on the terms and conditions, personal loans will also allow you to transfer all your debt into one place, and they might charge a lower rate of interest than a debt-consolidation loan. Your chances of this being cheaper increase further if you have a good credit score and track record in reliable borrowing.\n\n## Struggling with debt? Don't deal with it alone\n\nIf you decide to go for a debt consolidation loan, you might be able to use this as an opportunity to get your debt under control. You could try creating a new budget for yourself so you can understand where you spend money and where you might be able to save. With your debt in one place and a new budget, you might be able to cut up some of the credit cards you’re no longer using.\n\nIf you’re struggling with debt you may want to speak to a debt charity like [Step Change](https://www.stepchange.org/how-we-help.aspx) who offer free debt advice.\n\n`
//   );
//   writeToFile("gpt.json", transformGPTResponse(message) as any, true);
// };

const run = async () => {
  const message = await fetchFromAdana(
    "http://www.clearscore.com/learn/credit-score-and-report/what-you-need-to-know-if-you-have-no-credit-history"
  );
  writeToFile("adana.json", message);
};

run();
